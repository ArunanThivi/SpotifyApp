<!doctype html>
<html>
  <head>
      <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@600&display=swap" rel="stylesheet">
      <link rel="shortcut icon" href="https://developer.spotify.com/images/favicon.ico"/>
      <title>Spotify WebApp</title>
      <link rel="stylesheet" href="css/master.css">
      
  </head>
  <body>
    <div id="flexbox">
      <div id="music">
          <img src="misc/Music Note Clip Art 3455.jpg" class='lg-icon' id="songs-button"><br>
          Select Music
      </div>
      <div id='spotify'>
        <img src="misc/Spotify_Icon_RGB_Green.png" class='lg-icon' id='account-button'><br>
        Import Spotify
      </div>
    </div>
    <script>
      (function() {
        /**
         * Obtains parameters from the hash of the URL
         * @return Object
         */
        function getHashParams() {
          var hashParams = {};
          var e, r = /([^&;=]+)=?([^&;]*)/g,
              q = window.location.hash.substring(1);
            while ( e = r.exec(q)) {
              hashParams[e[1]] = decodeURIComponent(e[2]);
            }
          return hashParams;
        }

        var params = getHashParams();        
        var access_token = params.access_token;

        document.getElementById('songs-button').addEventListener('click', function() {
          var client_id = 'affcf25d1aaf4340b011b9bb809cb495';
          var redirect_uri = 'http://localhost:8080/Songs.html';
          var url = 'https://accounts.spotify.com/authorize?response_type=token';
          url += '&client_id=' + encodeURIComponent(client_id);
          url += '&redirect_uri=' + encodeURIComponent(redirect_uri);
          window.location = url;
        }, false);

        document.getElementById('account-button').addEventListener('click', function() {
          var client_id = 'affcf25d1aaf4340b011b9bb809cb495';
          var redirect_uri = 'http://localhost:8080/Profile.html';
          var scopes = 'user-top-read';

          var url = 'https://accounts.spotify.com/authorize?response_type=token';          
          url += '&client_id=' + encodeURIComponent(client_id);
          url += '&redirect_uri=' + encodeURIComponent(redirect_uri);
          url += '&scope=' + encodeURIComponent(scopes);
          window.location = url;
        }, false);
        
      })();
    </script>
  </body>
</html>
